# RAG Backup Downloader

Контейнер для автоматического скачивания бэкапов Qdrant и Redis из Google Drive. Используется в процессе миграции или развертывания системы на новых серверах.

## Назначение

Данный инструмент предназначен для упрощения процесса получения необходимых данных для работы RAG-сервиса. Он автоматически скачивает содержимое общей папки Google Drive (снапшоты Qdrant и дампы Redis) в локальную директорию.

Подробную инструкцию по использованию этих бэкапов см. в [`rag/docs/qdrant-migration.md`](../docs/qdrant-migration.md).

## Использование

Самый простой способ запустить утилиту — использовать Docker. Вам нужно примонтировать локальную папку к контейнеру, чтобы сохранить скачанные файлы.

### Запуск через Docker

```bash
docker run --rm \
  -v $(pwd)/rag:/backups \
  ghcr.io/lifelong-learning-assisttant/rag-backup-downloader:v001
```

После выполнения команды файлы будут доступны в локальной папке `./rag`.

## Сборка и разработка

Утилита написана на Python с использованием менеджера пакетов `uv`.

### Docker сборка

```bash
docker build -t rag-backup-downloader .
```

### Локальный запуск (через uv)

Если у вас установлен [`uv`](https://github.com/astral-sh/uv), вы можете запустить скрипт напрямую:

```bash
# Установка зависимостей
uv sync

# Запуск скрипта
uv run python download.py
```

## Конфигурация

На данный момент URL папки Google Drive жестко прописан в [`download.py`](download.py:6). 
Файлы скачиваются в директорию `/backups` внутри контейнера.